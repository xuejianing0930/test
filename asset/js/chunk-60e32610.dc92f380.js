(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60e32610"],{8330:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"top"},[a("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.materialList,(function(e,i){return a("van-tab",{key:i,attrs:{title:e.materialTypeDesc}},t._l(e.new,(function(e,i){return a("div",{key:i},[a("div",{staticClass:"pdfList",on:{click:function(a){return t.gotoPDf2(e,1)}}},[a("van-row",{staticClass:"van_row",attrs:{type:"flex",justify:"space-between"}},[a("van-col",{attrs:{span:"15"}},[t._v("《 "+t._s(e.materialName.length>10?e.materialName.slice(0,10)+"...":e.materialName)+"》")]),a("van-col",{style:{color:"已阅读"==e.read?"#1989fa":""},attrs:{span:"7"}},["已阅读"==e.read?a("van-icon",{attrs:{color:"#1989fa",name:"checked"}}):t._e(),t._v(" "+t._s("已阅读"==e.read?"已阅读":"未阅读"))],1)],1)],1)])})),0)})),a("div",{staticClass:"button"},[a("van-button",{staticClass:"but2",attrs:{type:"info"},on:{click:t.readAgree}},[t._v("我已逐页阅读并同意（"+t._s(this.read+"/"+t.materialList.length)+"）")])],1),a("van-popup",{style:{height:"100%",width:"100%"},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[a("pdf",{attrs:{src:t.pdfsrc,page:t.currentPage},on:{"num-pages":function(e){t.pageCount=e},loaded:function(e){t.currentPage=1}}}),a("div",{staticClass:"pdfpage"},[a("span",{on:{click:function(e){t.currentPage>1&&t.currentPage--}}},[t._v("上一页")]),a("span",[t._v("当前第"+t._s(t.currentPage||0)+"页/共"+t._s(t.pageCount||"∞")+"页")]),a("span",{on:{click:function(e){t.currentPage<t.pageCount&&t.currentPage++}}},[t._v("下一页")])]),a("div",{staticClass:"button"},[a("van-button",{staticClass:"but2",attrs:{type:"info"},on:{click:t.readAgree2}},[t._v("我已逐页阅读并同意"+t._s(this.read2+"/"+this.cont2))])],1)],1)],2)],1)},o=[],r=(a("99af"),a("a623"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("c975"),a("a15b"),a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("5319"),a("1276"),a("159b"),a("ddb0"),a("f3f3")),n=a("b680");function s(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260");function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var d=a("dde1");function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||c(t)||Object(d["a"])(t)||h()}var p=a("fc11"),u=(a("e7e5"),a("d399")),m=a("8bbf"),f=a.n(m),g=a("858e"),_=a("5880"),E=a("1d2f");f.a.use(u["a"]);var P={components:{pdf:g["a"]},data:function(){var t;return t={currentPage:0,pageCount:0,pdfsrc:"",active:1,read:0,read2:0,cont:"",cont2:"",outParams:0,inParams:0,productData:JSON.parse(sessionStorage.getItem("productData")),materialList:[],materiaRes:"",popupShow:!1,productSort:[{idSort:"1",nameSort:"产品条款"},{idSort:"2",nameSort:"投保须知"},{idSort:"3",nameSort:"投保声明书"},{idSort:"4",nameSort:"免除责任"},{idSort:"5",nameSort:"特别提示"},{idSort:"6",nameSort:"投保提示书"},{idSort:"7",nameSort:"其他文件"}],display:"block"},Object(p["a"])(t,"productData",JSON.parse(sessionStorage.getItem("productData"))),Object(p["a"])(t,"ENCR",null),Object(p["a"])(t,"SINGE_PAGE_from",JSON.parse(sessionStorage.getItem("SINGE_PAGE_from"))||{userName:"",idCard:"",dateTime:"",phone:"",SMSCode:"",school:"",gradeChoose:"",classChoose:"",email:"",area:""}),Object(p["a"])(t,"MORE_PAGE_from",JSON.parse(sessionStorage.getItem("MORE_PAGE_from"))||{userName:"",idCard:"",dateTime:"",userNameInsured:"",idCardInsured:"",dateTimeInsured:"",phone:"",SMSCode:"",school:"",gradeChoose:"",classChoose:"",email:"",area:""}),Object(p["a"])(t,"info",{choosedRela:""}),Object(p["a"])(t,"inParams2",1),t},created:function(){},mounted:function(){var t=this;if(this.exonerationNoticeCardRisk=JSON.parse(sessionStorage.getItem("exonerationNoticeCardRisk")),1==sessionStorage.getItem("route_radio")?this.info.choosedRela="01":(console.log(this.SINGE_PAGE_from),console.log(this.MORE_PAGE_from),this.info.choosedRela="04"),JSON.parse(sessionStorage.getItem("pdfList")).length>0){var e;this.materialList=JSON.parse(sessionStorage.getItem("pdfList")),this.materialList.map((function(e,a){(e.materialType&&"M08"==e.materialType||"M11"==e.materialType)&&t.materialList.splice(a,1)})),console.log("删除健康告知",this.materialList),this.pdfPreview(0);var a=this.materialList.filter((function(t){return"M06"==t.materialType||"M07"==t.materialType||"M08"==t.materialType||"M09"==t.materialType||"M10"==t.materialType})),i=a.map((function(t){return t.new})),o={materialTypeDesc:"其他文件"};o.new=(e=[]).concat.apply(e,l(i)),console.log("其他文件",o),o.new.length>1&&this.materialList.push(o);var n=[];this.materialList.forEach((function(e){t.productSort.forEach((function(t){e.materialTypeDesc==t.nameSort&&n.push(Object(r["a"])(Object(r["a"])({},e),t))}))})),n.sort((function(t,e){return t.idSort-e.idSort})),this.materialList=n,console.log("最终的materialList",this.materialList)}},methods:Object(r["a"])(Object(r["a"])({},Object(_["mapActions"])(["checkHold","cardCollectionImport","mobileCheck","orderInfoUpdate"])),{},{readAgree:function(){if(console.log(this.outParams),this.read!=this.materialList.length){var t=this.materialList[this.outParams].new.every((function(t){return"已阅读"==t.read}));if(console.log("a",t),t){if(this.read++,this.read==this.materialList.length)return void(this.read=this.materialList.length);this.active=this.read,this.outParams++,this.c=0,this.read2=0,this.inParams=0}else this.popupShow=!0,this.gotoPDf(this.materialList[this.outParams].new[this.inParams]);this.cont2=this.materialList[this.outParams].new.length}else this.checkHold(this.params)},readAgree2:function(){this.cont2>this.inParams?(this.materialList[this.outParams].new[this.inParams].read="已阅读",console.log("this.materialList",this.materialList),this.read2=this.materialList[this.outParams].new.filter((function(t){return"已阅读"==t.read})).length,this.cont2=this.materialList[this.outParams].new.length,this.inParams++,console.log("cont",this.cont2,this.inParams),this.cont2>this.inParams&&this.gotoPDf(this.materialList[this.outParams].new[this.inParams])):this.popupShow=!1},gotoPDf:function(t,e){this.popupShow=!0;var a=Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_BASE_URL||"",i=location.origin+location.pathname.replace("/elife-card","")+a,o=t.materialPath;this.pdfsrc=g["a"].createLoadingTask(i+"images"+o),console.log("pdfsrc",this.pdfsrc),console.log("item",t)},gotoPDf2:function(t,e){if(console.log("item",t),t.read){this.popupShow=!0;var a=Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_BASE_URL||"",i=location.origin+location.pathname.replace("/elife-card","")+a,o=t.materialPath;this.pdfsrc=g["a"].createLoadingTask(i+"images"+o),console.log("pdfsrc",this.pdfsrc)}else Object(u["a"])("按顺序阅读后，方可查看。")},pdfPreview:function(t){var e=this,a=Object(E["g"])(this.materialList,t);Promise.all(a.map((function(t){return t.materialType?e.$api.common.getProductMaterialDetail(Object(r["a"])({prdId:e.productData.prd_id},t)):t}))).then((function(t){console.log(t,"res");var a=t.map((function(t){return t.data}));e.$nextTick((function(){e.materialList.map((function(t,e){t.new=a[e]}))})),e.active=0,console.log("this",e.materialList);var i=t.filter((function(t){return 1==t.status})),o=i.every((function(t){return 0==t.data.length}));o?(e.display="none",e.checkHold(e.params)):(e.pdfs=t.reduce((function(t,e){var a=[];return a="1"===e.status?e.data.length?e.data:[e.data]:e.notPdf?[e]:[],t.concat(a)}),[]),e.$loading.hide())}))}}),computed:Object(r["a"])({wordTip:function(){var t=this.pdfs[this.pdfIndex],e=this.ENCR,a=this.productData.plans;if(console.log(e,"enrc"),t&&t.notPdf){var i=a.map((function(t){return t.planCode.slice(0,-2)})),o=a.map((function(t){return e.find((function(e){return e.risk===t.planCode.slice(0,-2)})).riskName})),r=e.filter((function(t){return i.includes(t.risk)&&t.isHI})).sort((function(t,e){return i.indexOf(t.risk)-i.indexOf(e.risk)})).map((function(t){return t.riskName}));if("exoneration"===t.type)return"本产品计划由《".concat(o.join("》、《"),"》组成，").concat(t.materialName,"如下：");console.log("HI",r);var n=r.length>0?"。其中《".concat(r.join("》、《"),"》为健康保险产品"):"";return"本产品计划由《".concat(o.join("》、《"),"》组成").concat(n,"，").concat(t.materialName,"如下：")}return""},params:function(){console.log(this.info);var t=this.productData.batchNo||this.batch.batchNo||this.batchNum||"",e="";e=-1!=location.href.indexOf("channel")?location.href.split("=")[1]:this.channelCode;var a=sessionStorage.getItem("channelCode");"0037"===a&&(e=a),console.log(e),t=t.length>3?t:"";var i=this.batch.cardPwd?{plchdCardPwd:this.batch.cardPwd}:{},o=JSON.parse(sessionStorage.getItem("planPage")),n=1==this.productData.takeEffectFlag?"".concat(o.time.slice(0,4))+"-".concat(o.time.slice(4,6))+"-".concat(o.time.slice(6,8)):"".concat(o.time.slice(0,4))+"-".concat(o.time.slice(4,6))+"-".concat(o.time.slice(6,8))+" 24:00:00";return Object(r["a"])(Object(r["a"])({},{prdId:this.productData.prd_id,orderCode:sessionStorage.getItem("SINGE_PAGE_orderfode"),plchdCardNo:JSON.parse(sessionStorage.getItem("insuranceInformation_PAGE")).plchdCardNo||"",insPolcyIntndEfDt:JSON.parse(sessionStorage.getItem("planPage")).time,plchdBrthDt:"01"==this.info.choosedRela?E["b"].getBirthday(this.SINGE_PAGE_from.idCard):E["b"].getBirthday(this.MORE_PAGE_from.idCard),plchdCrdtExpDt:"01"==this.info.choosedRela?Object(E["a"])("长期有效"==this.SINGE_PAGE_from.dateTime?99991231:this.SINGE_PAGE_from.dateTime):Object(E["a"])("长期有效"==this.MORE_PAGE_from.dateTime?99991231:this.MORE_PAGE_from.dateTime),plchdCrdtNo:"01"==this.info.choosedRela?Object(E["a"])(this.SINGE_PAGE_from.idCard):Object(E["a"])(this.MORE_PAGE_from.idCard),plchdCrdtTpCd:"1010",plchdEmailAdr:(this.info.choosedRela,Object(E["a"])(this.MORE_PAGE_from.email)),plchdGndCd:"01"==this.info.choosedRela?E["b"].getSex(this.SINGE_PAGE_from.idCard):E["b"].getSex(this.MORE_PAGE_from.idCard),plchdMoveTelNo:"01"==this.info.choosedRela?Object(E["a"])(this.SINGE_PAGE_from.phone):Object(E["a"])(this.MORE_PAGE_from.phone),plchdNatCd:"156",plchdNm:"01"==this.info.choosedRela?Object(E["a"])(this.SINGE_PAGE_from.userName):Object(E["a"])(this.MORE_PAGE_from.userName),plchdAndRcgnReTpCd:Object(E["e"])(this.info.choosedRela,E["b"].getSex(this.MORE_PAGE_from.idCard||""),E["b"].getSex(this.MORE_PAGE_from.idCardInsured||"")),rcgnBrthDt:"01"==this.info.choosedRela?E["b"].getBirthday(this.SINGE_PAGE_from.idCard):E["b"].getBirthday(this.MORE_PAGE_from.idCardInsured),rcgnCrdtExpDt:"01"==this.info.choosedRela?Object(E["a"])("长期有效"==this.SINGE_PAGE_from.dateTime?99991231:this.SINGE_PAGE_from.dateTime):Object(E["a"])("长期有效"==this.MORE_PAGE_from.dateTimeInsured?99991231:this.MORE_PAGE_from.dateTimeInsured),rcgnCrdtNo:"01"==this.info.choosedRela?Object(E["a"])(this.SINGE_PAGE_from.idCard):Object(E["a"])(this.MORE_PAGE_from.idCardInsured),rcgnCrdtTpCd:"1010",rcgnEmail:(this.info.choosedRela,Object(E["a"])(this.MORE_PAGE_from.email)),rcgnGndCd:"01"==this.info.choosedRela?E["b"].getSex(this.SINGE_PAGE_from.idCard):E["b"].getSex(this.MORE_PAGE_from.idCardInsured),rcgnNatCd:"156",rcgnNm:"01"==this.info.choosedRela?this.SINGE_PAGE_from.userName:this.MORE_PAGE_from.userNameInsured,channelCode:""==e?this.channelCode:e,plchdProvCd:this.productData.plchdProvinceCode,plchdCityCd:this.productData.plchdCityCode,plchdCntyAndDstcCd:this.productData.plchdDistrictCode,rsdntTpCd:this.productData.plchdCityFlag,appNoNum:this.productData.plchdPrtCount,totInsPremAmt:this.productData.initPyFAmt,coPyFAmt:this.productData.coPyFAmt,interfaceCode:this.productData.funcFlag,channel:e,batchNo:t,classId:"01"==this.info.choosedRela?this.SINGE_PAGE_from.classId:this.MORE_PAGE_from.classId,insurear:this.productData.plans[0].insuYear,insurearflag:this.productData.plans[0].insuYearFlag,insValiDate:n}),i)}},Object(_["mapState"])({userCode:function(t){return t.app.userCode},phone:function(t){return t.app.phone},userInfo:function(t){return t.app.policyInfo},hasUserInfo:function(t){return t.app.hasUserInfo},hasSomeUserInfo:function(t){return t.app.hasSomeUserInfo},batch:function(t){return t.app.batch},channelCode:function(t){return t.app.channelCode},minDate:function(t){return t.app.minDate},maxDate:function(t){return t.app.maxDate},batchInfo:function(t){return t.app.batchInfo},importActiveFlag:function(t){return t.app.importActiveFlag},checkPhoneID:function(t){return t.app.checkPhoneID},hasCheckHold:function(t){return t.app.hasCheckHold},batchNum:function(t){return t.app.batchNo},routeQuery:function(t){return t.app.routeQuery}}))},b=P,S=(a("fe6f"),a("2877")),C=Object(S["a"])(b,i,o,!1,null,"2ed573f8",null);e["default"]=C.exports},"8f22":function(t,e,a){},fe6f:function(t,e,a){"use strict";var i=a("8f22"),o=a.n(i);o.a}}]);
//# sourceMappingURL=chunk-60e32610.dc92f380.js.map