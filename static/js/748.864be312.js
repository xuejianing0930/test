"use strict";(self["webpackChunkelife_card"]=self["webpackChunkelife_card"]||[]).push([[748],{9748:function(t,e,n){n.r(e),n.d(e,{default:function(){return T}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"top"},[e("h4",[t._v("投保人/被保人的监护人签名")]),e("vueEsign")],1)},s=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"signHandle"},[e("canvas",{ref:"signHandle",staticClass:"canvas"}),e("div",{staticClass:"btn_container van-hairline--top",style:{height:t.height+"px"}},[e("van-radio-group",{staticClass:"radio_container",on:{change:t.radioHandle},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.liColors,(function(t){return e("van-radio",{key:t,attrs:{"checked-color":t,name:t}})})),1),e("div",[e("van-button",{attrs:{size:"mini"},on:{touchstart:t.clearHandle}},[t._v("清空")]),e("van-button",{attrs:{type:"info",size:"mini"},on:{touchstart:t.saveImg}},[t._v("确认")])],1)],1)])},a=[];const{clientWidth:l,clientHeight:c}=document.documentElement;var r={data(){return{radio:"#000",height:50,direction:!1,el:"",ctx:"",background:"#fff",color:"#000",linewidth:3,liColors:["#ee0a24","#000","#1890ff"]}},created(){this.color=this.radio,window.addEventListener("onorientationchange"in window?"orientationchange":"resize",(()=>{180!==window.orientation&&0!==window.orientation||(this.direction=!1,this.draw()),90!==window.orientation&&-90!==window.orientation||(this.direction=!0,this.draw())}),!1)},mounted(){this.draw()},methods:{radioHandle(t){this.color=t,this.setCanvas()},draw(){document.addEventListener("touchmove",(t=>t.preventDefault()),{passive:!1}),this.el=this.$refs.signHandle,this.initCanvas()},initCanvas(){const{height:t,direction:e,el:n}=this;e?(n.width=c,n.height=l-t):(n.width=l,n.height=c-t),this.ctx=n.getContext("2d"),this.setCanvas(),this.drawStart(),this.drawing(),this.drawEnd()},setCanvas(){const{ctx:t,height:e,direction:n}=this;console.log(n),t.fillStyle=this.background,n?t.fillRect(0,0,c,l-e):t.fillRect(0,0,l,c-e),t.strokeStyle=this.color,t.lineWidth=this.linewidth,t.lineCap="round"},drawStart(){const{el:t,ctx:e}=this;t.addEventListener("touchstart",(t=>{e.beginPath(),e.moveTo(t.changedTouches[0].pageX,t.changedTouches[0].pageY)}),!1)},drawing(){const{el:t,ctx:e}=this;t.addEventListener("touchmove",(t=>{e.lineTo(t.changedTouches[0].pageX,t.changedTouches[0].pageY),e.stroke()}),!1)},drawEnd(){const{el:t,ctx:e}=this;t.addEventListener("touchend",(()=>e.closePath()),!1)},clearHandle(){this.initCanvas()},saveImg(){const t=this.el.toDataURL();console.log("保存签名成功"+t)}}},d=r,h=n(3736),u=(0,h.Z)(d,o,a,!1,null,"de81148c",null),g=u.exports,v=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"top"},[e("div",{staticClass:"button"},[e("div",{staticClass:"new-div",on:{click:t.handleReset}},[t._v("清空")]),e("div",{staticClass:"new-div",on:{click:t.handleGenerate}},[t._v("图片")]),e("div",{staticClass:"new-div",on:{click:t.gotoInsuranceSynthetic}},[t._v("提交")])]),e("div",{staticClass:"esign"},[e("div",{staticClass:"esign-bord"},[e("vue-esign",{ref:"esign",attrs:{width:t.clientWidth,height:t.clientHeight,isCrop:t.isCrop,lineWidth:t.lineWidth,lineColor:t.lineColor,bgColor:t.bgColor},on:{"update:bgColor":function(e){t.bgColor=e},"update:bg-color":function(e){t.bgColor=e}}})],1)])]),e("div",[e("img",{attrs:{src:t.resultImg,alt:""}})])])},m=[],C=n(311),f=n.n(C),w=n(8871);f().use(w.Toast);var p={name:"",components:{},data(){return{lineWidth:6,lineColor:"#000000",bgColor:"",resultImg:"",isCrop:!1,clientHeight:document.documentElement.clientHeight,clientWidth:document.documentElement.clientWidth}},mounted(){console.log(document.documentElement.clientWidth),console.log(document.documentElement.clientHeight)},methods:{gotoInsuranceSynthetic(){this.handleGenerate(),this.$nextTick((()=>{this.resultImg?this.$router.push({path:"/insuranceSynthetic"}):w.Toast.fail("请签名")}))},handleReset(){this.$refs.esign.reset(),this.resultImg=""},handleGenerate(){this.$refs.esign.generate().then((t=>{this.resultImg=t,console.log(t)})).catch((t=>{w.Toast.fail("请签名")}))}}},b=p,_=(0,h.Z)(b,v,m,!1,null,"07c11fba",null),k=_.exports,E={name:"",components:{signHandle:g,vueEsign:k},data(){return{}},created(){},mounted(){},methods:{},watch:{},computed:{}},x=E,H=(0,h.Z)(x,i,s,!1,null,"6ce3ebde",null),T=H.exports}}]);